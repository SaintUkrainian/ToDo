(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{40:function(e,t,n){e.exports=n(79)},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(16),c=n.n(r),i=(n(45),n(10)),u=(n(46),n(47),n(11)),l=function(e){return{type:"set_userId",userId:e}},s=function(e){return{type:"set_token",token:e}},d=function(){return localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("expirationDate"),{type:"logout"}},m=function(){return function(e){var t,n=localStorage.getItem("token");if(n){var a=localStorage.getItem("userId"),o=new Date(localStorage.getItem("expirationDate"));o<new Date?e(d()):(e(s(n)),e(l(a)),e({type:"set_authenticated"}),e((t=(o.getTime()-(new Date).getTime())/1e3,function(e){setTimeout((function(){return e(d())}),1e3*t)})))}else e(d())}},p=n(8);var f=Object(p.b)((function(e){return{authenticated:e.authenticated}}),(function(e){return{setToLogin:function(t){return e(function(e){return{type:"set_toLogin",value:e}}(t))},logout:function(){return e(d())}}}))((function(e){var t=null;return t=e.authenticated?o.a.createElement("button",{className:"AuthBtn",onClick:e.logout},"Logout"):o.a.createElement("div",{className:"Buttons"},o.a.createElement(u.c,{className:"AuthBtn Login",to:"/auth",onClick:function(){return e.setToLogin(!0)}},"Login"),o.a.createElement("h4",null,"/"),o.a.createElement(u.c,{className:"AuthBtn SignUp",to:"/auth",onClick:function(){return e.setToLogin(!1)}},"Sign up")),o.a.createElement("div",{className:"NavBar"},o.a.createElement("h1",{style:{color:"white"}},"Todo app"),t)})),h=n(12),g=n(2),b=n(14),v=n.n(b),E=(n(71),function(){return o.a.createElement("div",{className:"loader"},"Loading...")}),O=n(37),j=n.n(O),k=n(38),w=n.n(k),y=(n(72),function(e){return o.a.createElement("div",{className:"Todo"},o.a.createElement("div",null,o.a.createElement("h1",{style:{textDecorationLine:e.done?"line-through":"none",textDecorationColor:"rgb(20, 63, 200)",textDecorationThickness:5}},e.todo.aim)),o.a.createElement("p",{style:{textDecorationColor:"rgb(20, 63, 200)",textDecorationLine:e.done?"line-through":"none",textDecorationThickness:3}},e.todo.description),o.a.createElement("div",null,o.a.createElement("button",{onClick:e.setDone,style:{color:"green"}},"Done!"),o.a.createElement("button",{onClick:e.delete},"Delete")))});n(73);var I=Object(p.b)((function(e){return{authenticated:e.authenticated,token:e.token,userId:e.userId}}),(function(e){return{checkAuth:function(){return e(m())}}}))((function(e){var t=Object(a.useState)({aim:"",description:"",done:!1}),n=Object(i.a)(t,2),r=n[0],c=n[1],u=e.authenticated,l=e.checkAuth,s=e.token,d=e.userId,m=Object(a.useState)([]),p=Object(i.a)(m,2),f=p[0],b=p[1],O=Object(a.useState)(!0),k=Object(i.a)(O,2),I=k[0],S=k[1];Object(a.useEffect)((function(){if(l(),u&&d&&s){var e="auth="+s+'&orderBy="userId"&equalTo="'+d+'"';v.a.get("https://todoapp-85a8f-default-rtdb.europe-west1.firebasedatabase.app/todos.json?"+e).then((function(e){var t=[];for(var n in e.data){var a=Object(g.a)({id:n},e.data[n]);t.push(a)}b(t),S(!1)})).catch((function(e){}))}}),[u,l,s,d]);var D=function(e,t){c(Object(g.a)(Object(g.a)({},r),{},Object(h.a)({},t,e.target.value)))},L=null;return L=u?I?o.a.createElement(E,null):o.a.createElement(j.a,{component:"div",className:"Todos"},f.map((function(e){return o.a.createElement(w.a,{classNames:"fade",timeout:300,key:e.id},o.a.createElement(y,{key:e.id,todo:e,done:e.done,delete:function(){return t=e.id,b((function(e){return e.map((function(e){return e.id!==t?e:Object(g.a)(Object(g.a)({},e),{},{aim:"Deleting"})}))})),void v.a.delete("https://todoapp-85a8f-default-rtdb.europe-west1.firebasedatabase.app/todos/"+t+".json").then((function(e){b((function(e){return e.filter((function(e){return e.id!==t}))}))})).catch();var t},setDone:function(){return function(e){var t={};b(f.map((function(n){return n.id===e?t=Object(g.a)(Object(g.a)({},n),{},{done:!0}):n}))),v.a.patch("https://todoapp-85a8f-default-rtdb.europe-west1.firebasedatabase.app/todos/"+e+".json",{aim:t.aim,description:t.description,done:t.done}).then()}(e.id)}}))}))):o.a.createElement("h1",{style:{color:"orange"}},"You should login/sign up in order to make todos!"),o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",{style:{color:"white"}},"Your Todos"),o.a.createElement("div",{className:"SetTodo"},o.a.createElement("input",{type:"text",onChange:function(e){return D(e,"aim")},placeholder:"Your Aim",value:r.aim}),o.a.createElement("textarea",{type:"text",onChange:function(e){return D(e,"description")},placeholder:"Description",value:r.description,style:{height:150}}),o.a.createElement("button",{onClick:function(){r.aim&&r.description&&(v.a.post("https://todoapp-85a8f-default-rtdb.europe-west1.firebasedatabase.app/todos.json",Object(g.a)(Object(g.a)({},r),{},{userId:e.userId})).then((function(e){b((function(t){return t.concat({id:e.data.name,aim:r.aim,description:r.description,done:!1})}))})).catch((function(e){})),c({aim:"",description:"",done:!1}))}},"Add TODO")),L)})),S=n(1);n(78);var D=Object(p.b)((function(e){return{toLogin:e.toLogin,authenticated:e.authenticated}}),(function(e){return{setToken:function(t){return e(s(t))},setUserId:function(t){return e(l(t))},setAuthenticated:function(){return e({type:"set_authenticated"})},logout:function(){return e(d())}}}))((function(e){var t=Object(a.useState)({email:"",password:"",passwordWrong:null,emailWrong:null}),n=Object(i.a)(t,2),r=n[0],c=n[1],l=Object(a.useState)(""),s=Object(i.a)(l,2),d=s[0],m=s[1],p=function(e,t){var n;c(Object(g.a)(Object(g.a)({},r),{},(n={},Object(h.a)(n,t,e.target.value),Object(h.a)(n,t+"Wrong",!1),n)))},f=function(t,n,a){e.setUserId(t),e.setAuthenticated(),e.setToken(n),localStorage.setItem("userId",t),localStorage.setItem("token",n);var o=new Date((new Date).getTime()+1e3*a);localStorage.setItem("expirationDate",o)};return o.a.createElement("div",{className:"Auth"},e.authenticated?o.a.createElement(S.a,{to:"/"}):null,o.a.createElement("h1",{style:{color:"white"}},e.toLogin?"Login":"Sign Up"),d?o.a.createElement("p",{style:{color:"salmon"}},d):null,o.a.createElement("form",{onSubmit:function(t){return function(t){t.preventDefault();var n=r.email.trim(),a=r.password.trim();if(/.+.[a-z]+\.[a-z]{2,3}/.test(n)&&/.{6,}/.test(a)){var o=e.toLogin?"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyDtXkNYeovl9gqg1Fcv2M3AEwfj8Z22ZvA":"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyDtXkNYeovl9gqg1Fcv2M3AEwfj8Z22ZvA";v.a.post(o,{email:n,password:a,returnSecureToken:!0}).then((function(e){f(e.data.localId,e.data.idToken,e.data.expiresIn)})).catch((function(t){return m(e.toLogin?"Invalid credentials!":"User already exists!")}))}else/.+.[a-z]+\.[a-z]{2,3}/.test(n)||c((function(e){return Object(g.a)(Object(g.a)({},e),{},{emailWrong:!0})})),/.{6,}/.test(a)||c((function(e){return Object(g.a)(Object(g.a)({},e),{},{passwordWrong:!0})}))}(t)},className:"AuthForm"},o.a.createElement("input",{type:"text",value:r.email,onChange:function(e){return p(e,"email")},placeholder:"email",style:{backgroundColor:r.emailWrong?"salmon":null}}),o.a.createElement("input",{type:"password",value:r.password,onChange:function(e){return p(e,"password")},placeholder:"password",style:{backgroundColor:r.passwordWrong?"salmon":null}}),o.a.createElement("input",{type:"submit",value:e.toLogin?"Login":"Sign Up",className:"auth-btn"})),o.a.createElement(u.b,{to:"/",style:{color:"white"}},"Back Home!"))}));var L=Object(p.b)(null,(function(e){return{checkAuth:function(){return e(m())}}}))((function(e){var t=Object(a.useState)({authenticated:!0,userId:null,login:!1}),n=Object(i.a)(t,2),r=n[0],c=n[1],u=e.checkAuth;return Object(a.useEffect)((function(){u()})),o.a.createElement("div",{className:"App"},o.a.createElement(f,{auth:r,setAuth:c}),o.a.createElement(S.d,null,o.a.createElement(S.b,{path:"/auth",component:D}),o.a.createElement(S.b,{exact:!0,path:"/",component:I}),o.a.createElement(S.a,{to:"/"})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var T=n(15),A=n(39),N={authenticated:!1,userId:null,token:null,toLogin:!1},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"set_authenticated":return Object(g.a)(Object(g.a)({},e),{},{authenticated:!0});case"set_token":return Object(g.a)(Object(g.a)({},e),{},{token:t.token});case"set_userId":return Object(g.a)(Object(g.a)({},e),{},{userId:t.userId});case"set_toLogin":return Object(g.a)(Object(g.a)({},e),{},{toLogin:t.value});case"logout":return N;default:return e}},_=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||T.c,C=Object(T.d)(x,_(Object(T.a)(A.a)));c.a.render(o.a.createElement(p.a,{store:C},o.a.createElement(u.a,{basename:"todo-app"},o.a.createElement(L,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.d3456271.chunk.js.map