(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{40:function(e,t,n){e.exports=n(79)},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(16),c=n.n(r),i=(n(45),n(9)),u=(n(46),n(47),n(11)),l=function(e){return{type:"set_userId",userId:e}},s=function(e){return{type:"set_token",token:e}},d=function(){return localStorage.removeItem("token"),localStorage.removeItem("userId"),{type:"logout"}},m=n(10);var p=Object(m.b)((function(e){return{authenticated:e.authenticated}}),(function(e){return{setToLogin:function(t){return e(function(e){return{type:"set_toLogin",value:e}}(t))},logout:function(){return e(d())}}}))((function(e){var t=null;return t=e.authenticated?o.a.createElement("button",{className:"AuthBtn",onClick:e.logout},"Logout"):o.a.createElement("div",{className:"Buttons"},o.a.createElement(u.c,{className:"AuthBtn Login",to:"/auth",onClick:function(){return e.setToLogin(!0)}},"Login"),o.a.createElement("h4",null,"/"),o.a.createElement(u.c,{className:"AuthBtn SignUp",to:"/auth",onClick:function(){return e.setToLogin(!1)}},"Sign up")),o.a.createElement("div",{className:"NavBar"},o.a.createElement("h1",{style:{color:"white"}},"Todo app"),t)})),f=n(12),h=n(2),g=n(14),b=n.n(g),v=(n(71),function(){return o.a.createElement("div",{className:"loader"},"Loading...")}),E=n(37),O=n.n(E),j=n(38),k=n.n(j),w=(n(72),function(e){return o.a.createElement("div",{className:"Todo"},o.a.createElement("div",null,o.a.createElement("h1",{style:{textDecorationLine:e.done?"line-through":"none",textDecorationColor:"rgb(20, 63, 200)",textDecorationThickness:5}},e.todo.aim)),o.a.createElement("p",{style:{textDecorationColor:"rgb(20, 63, 200)",textDecorationLine:e.done?"line-through":"none",textDecorationThickness:3}},e.todo.description),o.a.createElement("div",null,o.a.createElement("button",{onClick:e.setDone,style:{color:"green"}},"Done!"),o.a.createElement("button",{onClick:e.delete},"Delete")))});n(73);var y=Object(m.b)((function(e){return{authenticated:e.authenticated,token:e.token,userId:e.userId}}),(function(e){return{checkAuth:function(){return e((function(e){var t=localStorage.getItem("token");if(t){var n=localStorage.getItem("userId");new Date(localStorage.getItem("expirationDate"))<new Date?e(d()):(e(s(t)),e(l(n)),e({type:"set_authenticated"}))}else e(d())}))}}}))((function(e){var t=Object(a.useState)({aim:"",description:"",done:!1}),n=Object(i.a)(t,2),r=n[0],c=n[1],u=e.authenticated,l=e.checkAuth,s=e.token,d=e.userId,m=Object(a.useState)([]),p=Object(i.a)(m,2),g=p[0],E=p[1],j=Object(a.useState)(!0),y=Object(i.a)(j,2),I=y[0],S=y[1];Object(a.useEffect)((function(){if(l(),u&&d&&s){var e="auth="+s+'&orderBy="userId"&equalTo="'+d+'"';b.a.get("https://todoapp-85a8f-default-rtdb.europe-west1.firebasedatabase.app/todos.json?"+e).then((function(e){var t=[];for(var n in e.data){var a=Object(h.a)({id:n},e.data[n]);t.push(a)}E(t),S(!1)})).catch((function(e){}))}}),[u,l,s,d]);var D=function(e,t){c(Object(h.a)(Object(h.a)({},r),{},Object(f.a)({},t,e.target.value)))},L=null;return L=u?I?o.a.createElement(v,null):o.a.createElement(O.a,{component:"div",className:"Todos"},g.map((function(e){return o.a.createElement(k.a,{classNames:"fade",timeout:300,key:e.id},o.a.createElement(w,{key:e.id,todo:e,done:e.done,delete:function(){return t=e.id,E((function(e){return e.map((function(e){return e.id!==t?e:Object(h.a)(Object(h.a)({},e),{},{aim:"Deleting"})}))})),void b.a.delete("https://todoapp-85a8f-default-rtdb.europe-west1.firebasedatabase.app/todos/"+t+".json").then((function(e){E((function(e){return e.filter((function(e){return e.id!==t}))}))})).catch();var t},setDone:function(){return function(e){var t={};E(g.map((function(n){return n.id===e?t=Object(h.a)(Object(h.a)({},n),{},{done:!0}):n}))),b.a.patch("https://todoapp-85a8f-default-rtdb.europe-west1.firebasedatabase.app/todos/"+e+".json",{aim:t.aim,description:t.description,done:t.done}).then()}(e.id)}}))}))):o.a.createElement("h1",{style:{color:"orange"}},"You should login/sign up in order to make todos!"),o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",{style:{color:"white"}},"Your Todos"),o.a.createElement("div",{className:"SetTodo"},o.a.createElement("input",{type:"text",onChange:function(e){return D(e,"aim")},placeholder:"Your Aim",value:r.aim}),o.a.createElement("textarea",{type:"text",onChange:function(e){return D(e,"description")},placeholder:"Description",value:r.description,style:{height:150}}),o.a.createElement("button",{onClick:function(){r.aim&&r.description&&(b.a.post("https://todoapp-85a8f-default-rtdb.europe-west1.firebasedatabase.app/todos.json",Object(h.a)(Object(h.a)({},r),{},{userId:e.userId})).then((function(e){E((function(t){return t.concat({id:e.data.name,aim:r.aim,description:r.description,done:!1})}))})).catch((function(e){})),c({aim:"",description:"",done:!1}))}},"Add TODO")),L)})),I=n(1);n(78);var S=Object(m.b)((function(e){return{toLogin:e.toLogin,authenticated:e.authenticated}}),(function(e){return{setToken:function(t){return e(s(t))},setUserId:function(t){return e(l(t))},setAuthenticated:function(){return e({type:"set_authenticated"})},logout:function(){return e(d())}}}))((function(e){var t=Object(a.useState)({email:"",password:"",passwordWrong:null,emailWrong:null}),n=Object(i.a)(t,2),r=n[0],c=n[1],l=Object(a.useState)(""),s=Object(i.a)(l,2),d=s[0],m=s[1],p=function(e,t){var n;c(Object(h.a)(Object(h.a)({},r),{},(n={},Object(f.a)(n,t,e.target.value),Object(f.a)(n,t+"Wrong",!1),n)))},g=function(t,n,a){e.setUserId(t),e.setAuthenticated(),e.setToken(n),localStorage.setItem("userId",t),localStorage.setItem("token",n),localStorage.setItem("expirationDate",a)};return o.a.createElement("div",{className:"Auth"},e.authenticated?o.a.createElement(I.a,{to:"/"}):null,o.a.createElement("h1",{style:{color:"white"}},e.toLogin?"Login":"Sign Up"),d?o.a.createElement("p",{style:{color:"salmon"}},d):null,o.a.createElement("form",{onSubmit:function(t){return function(t){if(t.preventDefault(),/.+.[a-z]+\.[a-z]{2,3}/.test(r.email)&&/.{6,}/.test(r.password)){var n=e.toLogin?"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyDtXkNYeovl9gqg1Fcv2M3AEwfj8Z22ZvA":"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyDtXkNYeovl9gqg1Fcv2M3AEwfj8Z22ZvA";b.a.post(n,{email:r.email,password:r.password,returnSecureToken:!0}).then((function(e){g(e.data.localId,e.data.idToken,e.data.expiresIn)})).catch((function(t){return m(e.toLogin?"Invalid credentials!":"User already exists!")}))}else/.+.[a-z]+\.[a-z]{2,3}/.test(r.email)||c((function(e){return Object(h.a)(Object(h.a)({},e),{},{emailWrong:!0})})),a=r.password,/.{6,}/.test(a)||c((function(e){return Object(h.a)(Object(h.a)({},e),{},{passwordWrong:!0})}));var a}(t)},className:"AuthForm"},o.a.createElement("input",{type:"text",value:r.email,onChange:function(e){return p(e,"email")},placeholder:"email",style:{backgroundColor:r.emailWrong?"salmon":null}}),o.a.createElement("input",{type:"password",value:r.password,onChange:function(e){return p(e,"password")},placeholder:"password",style:{backgroundColor:r.passwordWrong?"salmon":null}}),o.a.createElement("input",{type:"submit",value:e.toLogin?"Login":"Sign Up",className:"auth-btn"})),o.a.createElement(u.b,{to:"/",style:{color:"white"}},"Back Home!"))}));var D=function(){var e=Object(a.useState)({authenticated:!0,userId:null,login:!1}),t=Object(i.a)(e,2),n=t[0],r=t[1];return o.a.createElement("div",{className:"App"},o.a.createElement(p,{auth:n,setAuth:r}),o.a.createElement(I.d,null,o.a.createElement(I.b,{path:"/auth",component:S}),o.a.createElement(I.b,{exact:!0,path:"/",component:y}),o.a.createElement(I.a,{to:"/"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=n(15),A=n(39),N={authenticated:!1,userId:null,token:null,toLogin:!1},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"set_authenticated":return Object(h.a)(Object(h.a)({},e),{},{authenticated:!0});case"set_token":return Object(h.a)(Object(h.a)({},e),{},{token:t.token});case"set_userId":return Object(h.a)(Object(h.a)({},e),{},{userId:t.userId});case"set_toLogin":return Object(h.a)(Object(h.a)({},e),{},{toLogin:t.value});case"logout":return N;default:return e}},x=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||L.c,_=Object(L.d)(T,x(Object(L.a)(A.a)));c.a.render(o.a.createElement(m.a,{store:_},o.a.createElement(u.a,{basename:"todo-app"},o.a.createElement(D,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.3b3851a0.chunk.js.map